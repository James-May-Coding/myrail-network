<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>FEC Railways Dashboard</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body class="dashboard-page">
  <header class="topbar">
    <div class="logo">ðŸš‚ FEC Railways</div>
    <div class="user-area">
      <span id="user-info">Loading...</span>
      <button id="logout" class="btn small">Logout</button>
    </div>
  </header>

  <main class="content">
    <section class="card" style="display:flex;gap:24px;align-items:flex-start;">
      <div style="flex:1">
        <h3>Invites</h3>
        <div id="invites-container"></div>

        <h3 style="margin-top:18px">Communities</h3>
        <div id="communities-container"></div>
        <button id="create-community" class="btn" style="margin-top:10px">Create Community</button>
      </div>

      <div style="flex:2">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
          <h2>Active Trains</h2>
          <div>
            <button id="refresh-btn" class="btn small">Refresh</button>
            <button id="open-admin" class="btn small" title="Open admin panel">Admin Panel</button>
          </div>
        </div>

        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Code</th>
                <th>Description</th>
                <th>Direction</th>
                <th>Yard</th>
                <th>Crew</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="trains-body"></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <!-- Admin modal -->
  <div id="admin-modal" class="popup-frame" style="display:none;">
    <div class="popup-frame-header">
      <span id="admin-title">Admin â€” Manage Trains</span>
      <button id="admin-close" class="popup-frame-close">âœ•</button>
    </div>
    <div class="popup-frame-body" style="display:flex;gap:16px;">
      <div style="flex:1">
        <h4>Create / Edit Train</h4>
        <label>Group</label>
        <select id="admin-group"></select>
        <label>Code</label>
        <input id="admin-code" />
        <label>Description</label>
        <input id="admin-desc" />
        <label>Direction</label>
        <input id="admin-direction" />
        <label>Yard</label>
        <input id="admin-yard" />
        <div style="margin-top:8px;">
          <button id="admin-save" class="btn">Save</button>
          <button id="admin-delete" class="btn btn-danger">Delete</button>
        </div>
      </div>

      <div style="flex:1">
        <h4>Train Assignments</h4>
        <div id="admin-assignments" style="max-height:380px;overflow:auto;border:1px solid #eee;padding:8px;border-radius:8px;"></div>
        <label style="margin-top:8px">Add user by email</label>
        <input id="assign-email" placeholder="user@example.com" />
        <label>Role (E, C, etc)</label>
        <input id="assign-role" placeholder="E" />
        <div style="margin-top:8px;">
          <button id="assign-add" class="btn">Add</button>
        </div>
      </div>
    </div>
  </div>

  <!-- crew popup -->
  <div id="train-popup" class="popup-frame" style="display:none;">
    <div class="popup-frame-header"><span>Train Crew</span><button id="close-popup" class="popup-frame-close">âœ•</button></div>
    <div class="popup-frame-body" id="train-crew-list"></div>
  </div>

  <script type="module" src="./dashboard.js"></script>
</body>
</html>
